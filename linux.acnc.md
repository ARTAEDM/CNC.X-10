![Image](https://edm.ru/img/logo.png)

# СЧПУ АРТА.X-10. Интерфейсная подсистема. 

Обеспечивает взаимодействие с оператором, отработку команд, программ и станочных циклов. 
Подсистема построена на базе одноплатного компьютера под управлением ОС LINUX.

## Структура оборудования.

Одноплатный компьютер получает электропитание от блока питания, расположенного рядом на монтажной панели.
Загрузка происходит с системного USB-Flash диска, который разбит на 3 раздела.
Оперативная информация отображается на монитор, подключенный к одному из видеовыходов. 
Ввод информации осуществляется с клавиатуры. В ряде исполнений монитор обладает сенсорной поверхностью
и большинство действий возможно активировать нажатием на экранные кнопки. На переднюю панель выведены 2
USB разъёма, предназначенные для подключения USB-Flash диска с управляющими программами и для подключения 
дополнительных устройств. Взаимодействие с [подсистемой реального времени](dos32.rcnc.md) происходит через кабель
Ethernet, подключенный к сетевому  разъёму.

## Структура ПО.

TODO:

## Обновление ПО.

Для установки обновления потребуется USB-Flash диск (можно с рабочими программами).
Скачиваем **[актуальное](ACNC/UPD.UNI.V2-415G.zip)** обновление или любое доступное из **[истории](#история-версий)** и
распаковываем его в корень USB-Flash диска. Далее этот диск подключаем к загруженной системе. Система обнаружит
обновление и запросит подтверждение на установку и отдельно разрешение на перезапуск. После разрешения на установку
может появиться окно терминала, чтобы вернуть фокус ввода в СЧПУ нажмите ```ALT+TAB```.
После подтверждения система обновиться и перезапустится.

Вначале, установщик проверяет возможность установки и
если состояние системы позволяет, обновляет рабочие файлы,
выводит сообщение: **The system is updated successfully. REBOOTING** и перезагружает систему.

Если установка обновления не возможна, будет выведено сообщение **You cannot install this update option.**, следует перейти к
определению текущего состояния системы.

## Определение текущего состояния.

В нескольких случаях универсальное обновление не может быть установлено. Для подготовки 
корректирующего обновления требуется получить текущее состояние системы. Для этого
следует:

1. Распаковать [архив](CMD/get-cur-state.zip) в корень USB-Flash и подключить 
   его работающей системе. 
2. Согласиться на обновление системы (фактически обновления не произойдёт, это способ запустить внешнюю задачу).
3. После выполнения переключиться в **F2** и извлечь USB-Flash **CTRL+R**
4. На диске будет создан файл **saveДАТА.tar.gz**, его нужно выслать по почте [support@edm.ru](mailto:support@edm.ru).
   В теме укажите "КОРРЕКЦИЯ ОБНОВЛЕНИЯ"

## История версий:
* [02-425](ACNC/UPD.UNI.V2-425G.zip): Увеличена точность округления координат при фиксации.
* [02-415](ACNC/UPD.UNI.V2-415G.zip): Добавлена индикация текущего исполняемого кадра.
* [02-397](ACNC/UPD.UNI.V2-397G.zip): Исправлена ошибка восстановления задачи, остановленной на тех-команде.
* [02-393](ACNC/UPD.UNI.V2-393G.zip): Добавлен параметр **Предельное время загрузки программы**, был фиксированный 30с.
* 02-392: Добавлена возможность загрузки с установленной флешкой с программами.
* [02-390](ACNC/UPD.LITE.V2-390G.zip): Исправлена нестабильность подключения гидроагрегата.
* [02-389](ACNC/UPD.LITE.V2-389G.zip): Добавлена регулировка скорости разгона перемотки и натяжения.
* [02-388](ACNC/UPD.LITE.V2-388G.zip): Исправлены ошибки в прошивных командах M110 / M120.
* 02-387: Добавлен модуль гидроагрегата СВ51.
* [02-383](ACNC/UPD.LITE.V2-383G.zip): Увеличено предельное число кадров в программе до 1М.
* 02-381: Добавлена диагностика калибровки генератора.
* [02-375](ACNC/UPD.LITE.V2-375G.zip): Исправлен запуск с включённым MQTT и отсутствием подключения.
* 02-363: Исправлена ошибка в компиляторе.
* [02-361](ACNC/UPD.LITE.V2-361G.zip): Добавлена поддержка ARTAOS.
* 02-360: Исправлена автоматическая подгрузка тех.команд в скрипты.
* 02-359: Исправлена нестабильность работы внутренней сети.
* [02-358](ACNC/UPD.LITE.V2-358G.zip): Исправлено вероятное зависание при перезагрузке системы.
* [02-356](ACNC/UPD.LITE.V2-356G.zip): Уплотнён боковой индикатор состояния.
* 02-355: Убрана "ТЕНЬ" при отрисовке многосегментных программ.
* 02-354: Устранён пропуск повторного перемещения из скриптов.
* [02-353](ACNC/UPD.LITE.V2-353G.zip): Добавлена информация по задаче в истории. Исправлена ошибка отрисовки.
* [02-345](ACNC/UPD.LITE.V2-345G.zip): Управление ванной выделено в отдельный модуль, не зависит от наличия гидроагрегата.
* 02-342: Исправлен контроль зазоров.
* 02-341: Доработан модуль гидроагрегата.
* 02-340: Добавлена виртуальная ось P(Progress), для упрощения техкоманд.
* [02-339](ACNC/UPD.LITE.V2-339G.zip): Добавлено отключение подсистем при покадровой остановке.
* [02-338](ACNC/UPD.LITE.V2-338G.zip): Исправлен расчёт остатка времени выполнения программы после возобновления.
* [02-337](ACNC/UPD.LITE.V2-337G.zip): Добавлен контур детали на виде просмотра/обработки.
* 02-336: Добавлена навигация по виду программы в режиме просмотра (CTRL+стрелки,+,-, HOME).
* 02-335: Добавлен номер текущего исполняемого кадра.
* 02-334: Добавлены метрики загруженной программы.
* 02-333: Добавлен расчёт остатка времени выполнения.
* 02-332: Исправлена индикация кнопки "ОСТАНОВИТЬ".
* 02-331: Форсирована кодировка UTF-8 для lua.
* 02-330: Снижена загрузка графического потока.
* 02-229: Включена опция "ПОКАДРОВАЯ" обработка. **Требуется обновление RCNC до версии V3.16**
* [02-328](ACNC/UPD.LITE.V2-328G.zip): Убрана зависимость ядра системы от графического потока.
* 02-327: Ограничена частота обновления координат.
* 02-325: Добавлен статус последовательных каналов управления двигателями.
* [02-321](ACNC/UPD.LITE.V2-321G.zip): Повышена стабильность работы с частотным преобразователем Mitsubishi. Добавлен поиск центра по 3 точкам в 2х координатные системы. Добавлено безусловное обновление входов.
* 02-320: Исправлено пропадание перманентного натяжения после быстрой перезагрузки СЧПУ.
* [02-319](ACNC/UPD.LITE.V2-319G.zip): Исправлена ошибка обработки очереди программных последовательностей. **Требуется обновление RCNC до версии 3.15**.
* [02-318](ACNC/UPD.LITE.V2-318G.zip): Добавлен порог значимости компонентов вектора перемещения. 
* [02-315](ACNC/UPD.LITE.V2-315G.zip): Добавлен параметр *скорость заправки* проволоки.
* 02-313: Доработана процедура контроля питания.
* [02-307](ACNC/UPD.LITE.V2-307G.zip): Добавлена автоматическая чистка мусорных параметров.
* 02-306: Добавлена обработка конкатинатора строк в конфигурациях.
* 02-305: Удалён бросок напряжения при включении выверки.
* 02-304: Добавлены числовые метки параметров и универсальный доступ к ним.
* 02-302: Исправлена перезагрузка системы.
* [02-294](ACNC/UPD.LITE.V2-294G.zip): Доработано управление скоростью поворотной оси в x54 версии.
* 02-293: Добавлен ограничитель числа токовых импульсов (с версии генератора R37).
* 02-291: Доработки по поддержке универсальной версии перемотки.
* [02-290](ACNC/UPD.LITE.V2-290G.zip): Исправлена точка возврата в циклах прошивки. Добавлен останов генерации при релаксации (с версии генератора R36).
* 02-289: Добавлено отслеживание изменений скорости пульта. Добавлено обновление параметров изменённых в тех.командах.
* 02-286: Добавлено конфигурирование перемоток (для универсальной прошивки).
* [02-283](ACNC/UPD.LITE.V2-283G.zip): Добавлен асинхронный режим управления движением. Повышена стабильность.
* 02-281: Добавлен отладчик скриптов LRDB (VS-CODE PLUGIN).
* 02-279: Добавлена возможность создания/удаления папок (CTRL+INS/CTRL+DEL). Отключение флешки из любого режима (CTRL+R). Добавлено копирование папок.
* 02-277: Исправлено падение системы при выверке.
* 02-276: Исправлена работа пульта в размерном режиме. Убраны "мелькающие окошки" при запуске.
* 02-275: Доработка вывода информации на экране оптики.
* [02-274](ACNC/UPD.UNI.V2-274G.zip): Добавлена опция перехода в 0 координат задачи по XY.
* [02-273](ACNC/UPD.UNI.V2-273G.zip): Добавлена опция итерационной подгонки глубины отверстия для прошивных циклов.
* [02-262](ACNC/UPD.UNI.V2-262G.zip): Исправлена ошибка восстановления последней прерванной задачи, после отката.
* [02-260](ACNC/UPD.UNI.V2-260G.zip): Исправлена ошибка восстановления задачи из истории, прерванной после отката.
* 02-257: Добавлена функция замера глубины отверстия в прошивные варианты.
* 02-256: Добавлены функции привязки по оптической системе.
* [02-255](ACNC/UPD.UNI.V2-255G.zip): Добавлена функция [ограничения доступа](access.md).
* 02-254: Добавлен разворот камеры на 180.
* [02-253](ACNC/UPD.UNI.V2-253G.zip): Доработана индикация состояния гидроагрегата. Доработан режим длинных импульсов для прошивки.
* 02-252: Доработан перевод на EN.
* [02-249](ACNC/UPD.UNI.V2-249G.zip): Добавлен режим работы с одной GigE камерой.
* 02-248: Компактный вид истории задач.
* 02-247: Скорректированы скорости обработки UV координат. **Требуется обновление RCNC до версии 3.10**.
          Исправлены техкоманды использующие движение координат.
* [02-242](ACNC/UPD.UNI.V2-242G.zip): Добавлена возможность восстановления задач с активным шпинделем.
* [02-241](ACNC/UPD.UNI.V2-241G.zip): Исправлен эффект проглатывания кадра после выверочных операций в программе.
* [02-236](ACNC/UPD.UNI.V2-236G.zip): Добавлена поддержка шпиндельной координаты.
* [02-228](ACNC/UPD.UNI.V2-228G.zip): Исправлена ошибка возобновления последней задачи.
* 02-227: Введена поддержка отключения системы через выход ЭА.
* [02-226](ACNC/UPD.UNI.V2-226G.zip): Добавлено подавление *невозможных* координат.
* 02-225: Внутренние доработки.
* 02-224: Добавлена поддержка профилей генератора через скрипты.
* 02-223: Исправлена скорость работы с историей программ.
* 02-222: Исправлены ошибки при компиляции дуг с Z.
* 02-221: Исправлены ошибки при работе с каталогом скриптов.
* 02-218: Поддержка второго модуля перемотки переведена в основную ветку.
* 02-217: Тестовый режим генератора скрывается по умолчанию.
* 02-216: Добавлена опция питания конвертера RS232-RS485 через RTS/DTR.
* 02-215: Добавлено оповещение через email.
* 02-214: Доработан механизм поддержания скорости обработки при 4х координатной работе.
* 02-213: Вызов меню через F12.
* 02-212: Доработана поддержка поворотной оси в компиляторе.
* [02-207](ACNC/UPD.UNI.V2-207G.zip): Стабильная версия, ряд незначительных исправлений.
* 02-206: Добавлены коэффициенты масштаба шкал обратной связи.
* 02-202: Добавлена возможность использовать альтернативные функции на функциональной клавиатуре.
* 02-201: Доработки по оптике.
* [02-199](ACNC/UPD.UNI.V2-199G.zip): Исправлена ошибка отрисовки 4х координатных программ.
* 02-198: Добавлена подсветка сообщений в логе.
* [02-197](ACNC/UPD.UNI.V2-197G.zip): Исправлена ошибка завершения выверочной операции, чаще всего при выверке вертикальности.
* [02-195](ACNC/UPD.UNI.V2-195G.zip): Исправлен вывод сообщения перед созданием/корректировкой хранилища.
* [02-194](ACNC/UPD.UNI.V2-194G.zip): Выполнена ревизия кодировок LUA скриптов, все в UTF-8. 
  Стандартный *print* пока не изменён, так что отладочная только ENG.
  Добавлен механизм универсальных обновлений.
* 02-193: Исправлены схемы подсветки синтаксиса в редакторе, автопереключение между GCOD;TXT;LUA.
* 02-192: Добавлены отладочные модули.
* 02-191: Добавлен модуль управления двигателями HIWIN через электроавтоматику, процедура HOMING. 
* 02-190: Исправлен вывод сообщений в операционный лог.
* 02-189: Добавлен переключатель активности механизма истории задач. 
* 02-188: Исправил ошибку в модуле подстройки уровня для финешного и грубого режима, коэффициент был всегда 0.5. 
* 02-185: Добавил подсветку строк в текстах, исправил ошибку в функции M104.
* 02-184: Исправил M73 и M74. Добавил гистерезис по датчикам в гидросистеме.


![Image](http://edm.ru/style/bottom.png)
