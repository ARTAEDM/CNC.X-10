# Подстройка скорости перемотки

## Параметры
Настройки хранятся в файле [init.cfg](init-cfg.md).

```
  <GROUP NAME=WireControll>
    ...
    <VAL NAME=MSpeed TYPE=REAL VALUE=      0.8 MIN=0.000000 MAX=10.000000>
    <VAL NAME=MTention TYPE=REAL VALUE=      0 MIN=0.000000 MAX=2.000000>
    ...
    <VAL NAME=PickupStart TYPE=BYTE VALUE=1 MIN=0 MAX=50>
    <VAL NAME=PickupShift TYPE=BYTE VALUE=40 MIN=0 MAX=250>
    <VAL NAME=PickupStep TYPE=BYTE VALUE=150 MIN=1 MAX=255>
    ...
    <VAL NAME=WSPDauto TYPE=BYTE VALUE=      0 MIN=0        MAX=1>
    <VAL NAME=WK1      TYPE=REAL VALUE=      6 MIN=0.000000 MAX=100.000000>
    <VAL NAME=WK2      TYPE=REAL VALUE=    100 MIN=0.000000 MAX=100.000000>
    <VAL NAME=WSlo     TYPE=REAL VALUE=    0.4 MIN=0.000000 MAX=100.000000>
    <VAL NAME=WShi     TYPE=REAL VALUE=   15.5 MIN=0.000000 MAX=100.000000>
    ...
  </GROUP>
```

`MSpeed` - скорость перемотки при выверке **м/мин**  
`MTention` - натяжение при выверке (0=не изменять) **0..2.0**  

`PickupStart` - начальное положение раскладчика **мм**  
`PickupShift` - рабочая часть приёмной катушки **мм**  
`PickupStep` - шаг раскладчика (определяет скорость) **1..255**  

`WK1` - мощность начала вращения ролика перемотки **0..100**  
`WK2` - мощность максимальной скорости вращения **0..100**  
`WSlo` - минимальная скорость перемотки **м/мин**  
`WShi` - максимальная скорость перемотки **м/мин**  
`WSPDauto` - выполнять подстройку скорости **0/1**

## Калибровка
Для калибровки следует: 

1. установить `WK1`=0, `WK2`=100, `WSlo` =0, `WShi`=100, `WSPDauto`=0
2. перезагрузить станок
3. установить средний уровень натяжения
4. установить максимальную скорость перемотки
5. включить перемотку и нажав на кнопку задания скорости перемотки зафиксировать скорость в квадратных скобках `vC`.
   это измеренная скорость
6. затем снизить скорость до остановки перемотки
7. затем повысить скорость на минимально возможную величину 
8. включить перемотку, и если вращение остановиться в течении ~20 секунд, повторить пункт 7
9. запомнить заданную скорость `vA` и измеренную скорость `vB`
10. вписать в параметры измеренные величины:

`WK1`  <= `vA`  
`WK2`  <= 100  
`WSlo` <= `vB`  
`WShi` <= `vC`  

При использовании намоточной катушки следует установить `WSPDauto`=1. 
Это позволит компенсировать увеличение скорости по мере намотки проволоки на катушку.